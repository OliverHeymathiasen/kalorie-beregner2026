<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kalorieberegner</title>

<style>
:root{
  --blue:#0b2a5b;
  --blue2:#163c7a;
  --bg:#f3f6fb;
  --card:#fff;
  --text:#0b1220;
  --muted:#5b6b84;
  --border:#dbe4f2;
  --radius:18px;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
  background:var(--bg);
  color:var(--text);
}

.wrap{max-width:520px;margin:0 auto;padding:20px;}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}

h1{margin-top:0;font-size:28px;}
.step{display:none;}
.step.active{display:block;}

.choice{
  border:2px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin-bottom:10px;
  cursor:pointer;
}
.choice.selected{
  border-color:var(--blue);
  background:#eef4ff;
}

label{font-weight:700;}
.range{
  margin-bottom:14px;
}
.range span{
  float:right;
  color:var(--blue);
  font-weight:800;
}

button{
  width:100%;
  padding:14px;
  border:0;
  border-radius:14px;
  background:var(--blue);
  color:#fff;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
}
button.secondary{
  background:#eaf1ff;
  color:var(--blue);
  margin-bottom:10px;
}

input[type="email"],input[type="text"]{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:12px;
  border:1px solid var(--border);
  font-size:15px;
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<h1>Kalorieberegner</h1>
<p>Beregn dit daglige kaloriebehov og få min gennemgang på mail.</p>

<!-- STEP 1 -->
<div class="step active" id="step1">
  <div class="choice selected" data-goal="maintain">Vedligehold</div>
  <div class="choice" data-goal="lose">Smid fedt</div>
  <div class="choice" data-goal="gain">Byg muskelmasse</div>
  <button onclick="nextStep(2)">Næste</button>
</div>

<!-- STEP 2 -->
<div class="step" id="step2">
  <div class="range">
    <label>Alder <span id="ageVal">35</span></label>
    <input type="range" min="16" max="80" value="35" id="age">
  </div>
  <div class="range">
    <label>Højde (cm) <span id="heightVal">170</span></label>
    <input type="range" min="140" max="210" value="170" id="height">
  </div>
  <div class="range">
    <label>Vægt (kg) <span id="weightVal">100</span></label>
    <input type="range" min="40" max="200" value="100" id="weight">
  </div>
  <button class="secondary" onclick="nextStep(1)">Tilbage</button>
  <button onclick="nextStep(3)">Næste</button>
</div>

<!-- STEP 3 -->
<div class="step" id="step3">
  <div class="choice selected" data-activity="1.375">Let aktiv</div>
  <div class="choice" data-activity="1.55">Moderat aktiv</div>
  <div class="choice" data-activity="1.725">Meget aktiv</div>
  <div class="choice" data-activity="1.9">Ekstrem aktiv</div>
  <button class="secondary" onclick="nextStep(2)">Tilbage</button>
  <button onclick="calculate()">Beregn</button>
</div>

<!-- STEP 4 -->
<div class="step" id="step4">
  <h2>Dit daglige kaloriemål</h2>
  <h1><span id="caloriesOut">0</span> kcal</h1>

  <form
    action="https://me.us15.list-manage.com/subscribe/post?u=a8c95bb1bd295a68546d88267&id=1267d637b6&f_id=008bc2e1f0"
    method="post"
    target="_self"
    novalidate>

    <input type="text" name="FNAME" placeholder="Fornavn (valgfrit)">
    <input type="email" name="EMAIL" placeholder="Email" required>

    <!-- Mailchimp merge field -->
    <input type="hidden" name="KALORIER" id="mcCals">

    <!-- Tag -->
    <input type="hidden" name="tags" value="303">

    <button type="submit">Send mig min gennemgang</button>
  </form>

  <button class="secondary" onclick="nextStep(3)">Tilbage</button>
</div>

</div>
</div>

<script>
let state={
  goal:"maintain",
  age:35,
  height:170,
  weight:100,
  activity:1.375
};

function nextStep(n){
  document.querySelectorAll(".step").forEach(s=>s.classList.remove("active"));
  document.getElementById("step"+n).classList.add("active");
}

document.querySelectorAll(".choice").forEach(c=>{
  c.onclick=()=>{
    let parent=c.parentElement;
    parent.querySelectorAll(".choice").forEach(x=>x.classList.remove("selected"));
    c.classList.add("selected");
    if(c.dataset.goal)state.goal=c.dataset.goal;
    if(c.dataset.activity)state.activity=parseFloat(c.dataset.activity);
  }
});

["age","height","weight"].forEach(id=>{
  let el=document.getElementById(id);
  let out=document.getElementById(id+"Val");
  el.oninput=()=>{state[id]=+el.value;out.textContent=el.value;}
});

function calculate(){
  let bmr=447.593+(9.247*state.weight)+(3.098*state.height)-(4.33*state.age);
  let tdee=bmr*state.activity;
  let cal=tdee;
  if(state.goal==="lose")cal*=0.85;
  if(state.goal==="gain")cal*=1.1;
  cal=Math.round(cal);

  document.getElementById("caloriesOut").textContent=cal;
  document.getElementById("mcCals").value=cal;

  nextStep(4);
}
</script>
</body>
</html>
