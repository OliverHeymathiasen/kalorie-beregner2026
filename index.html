<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kalorieberegner â€“ Oliver Hey Fitness</title>
  <style>
    :root{
      --primary:#1D49A8;          /* logo-blÃ¥ */
      --primary-2:#2C61D6;
      --ink:#0B1B2A;
      --muted:#6A7A89;
      --bg:#F5F7FB;
      --card:#FFFFFF;
      --border:#E6EBF2;
      --shadow: 0 16px 40px rgba(11,27,42,.08);
      --radius: 14px;
      --radius2: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:var(--bg);
    }

    /* Topbar */
    .topbar{
      height:64px;
      background:#fff;
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:center;
      position:sticky;
      top:0;
      z-index:50;
    }
    .topbar-inner{
      width:min(980px, 92vw);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 0;
    }
    .logo{
      width:34px;height:34px;border-radius:10px;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      box-shadow: 0 10px 20px rgba(29,73,168,.18);
      flex:0 0 auto;
    }
    .brand-title{
      font-weight:800;
      letter-spacing:.2px;
      font-size:14px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      opacity:.9;
    }
    .pill-btn{
      border:0;
      background: rgba(29,73,168,.10);
      color:var(--primary);
      padding:10px 14px;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
    }
    .menu{
      width:44px;height:44px;border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      display:grid;
      place-items:center;
      cursor:pointer;
    }
    .menu span{
      width:18px;height:2px;background:var(--primary);
      position:relative;display:block;border-radius:2px;
    }
    .menu span:before,.menu span:after{
      content:"";
      width:18px;height:2px;background:var(--primary);
      position:absolute;left:0;border-radius:2px;
    }
    .menu span:before{top:-6px}
    .menu span:after{top:6px}

    /* Layout */
    .wrap{
      display:flex;
      justify-content:center;
      padding: 26px 0 60px;
    }
    .container{
      width:min(980px, 92vw);
    }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 22px;
    }

    /* Title */
    .hero{
      text-align:center;
      padding: 10px 8px 18px;
    }
    .hero h1{
      margin: 10px 0 8px;
      font-size: clamp(30px, 4.6vw, 44px);
      letter-spacing:-.8px;
      line-height:1.05;
      font-weight: 900;
    }
    .hero p{
      margin:0;
      color:var(--muted);
      font-weight:600;
    }

    /* Steps */
    .step{
      display:none;
      animation: fadeIn .18s ease-out;
    }
    .step.active{display:block}
    @keyframes fadeIn{
      from{opacity:0; transform: translateY(4px)}
      to{opacity:1; transform: translateY(0)}
    }

    /* Options */
    .section-title{
      font-size:18px;
      font-weight:900;
      margin: 6px 0 10px;
      letter-spacing:-.2px;
    }
    .subline{
      margin:0 0 16px;
      color:var(--muted);
      font-weight:650;
      line-height:1.35;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 720px){
      .grid.two{grid-template-columns: 1fr 1fr;}
      .grid.three{grid-template-columns: 1fr 1fr 1fr;}
    }

    .opt{
      border:2px solid #DCE4F3;
      background:#fff;
      border-radius: 14px;
      padding: 14px 14px;
      display:flex;
      gap:12px;
      align-items:center;
      cursor:pointer;
      transition: .15s ease;
      user-select:none;
    }
    .opt:hover{
      transform: translateY(-1px);
      border-color: rgba(29,73,168,.35);
      box-shadow: 0 10px 22px rgba(11,27,42,.06);
    }
    .opt.selected{
      border-color: var(--primary);
      background: rgba(29,73,168,.08);
    }
    .icon{
      width:44px;height:44px;border-radius:12px;
      border:1px solid rgba(29,73,168,.18);
      background: rgba(29,73,168,.10);
      display:grid;
      place-items:center;
      flex:0 0 auto;
    }
    .icon svg{width:22px;height:22px; fill: none; stroke: var(--primary); stroke-width:2}
    .opt h3{
      margin:0;
      font-size:18px;
      font-weight:900;
      letter-spacing:-.3px;
    }
    .opt p{
      margin:3px 0 0;
      color:var(--muted);
      font-weight:650;
      line-height:1.25;
      font-size:13px;
    }

    /* Controls */
    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:flex-end;
    }
    .field{
      flex:1 1 210px;
      min-width: 180px;
    }
    .label{
      font-weight:900;
      margin: 10px 0 8px;
    }
    .seg{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .seg button{
      height:54px;
      border-radius:14px;
      border:2px solid #DCE4F3;
      background:#fff;
      cursor:pointer;
      font-weight:900;
      font-size:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      transition:.15s ease;
    }
    .seg button.active{
      border-color: var(--primary);
      background: rgba(29,73,168,.08);
      color: var(--primary);
      box-shadow: 0 10px 22px rgba(29,73,168,.12);
    }

    .slider-wrap{
      margin-top: 8px;
      padding: 6px 0 2px;
    }
    input[type="range"]{
      width:100%;
      accent-color: var(--primary);
    }
    .value{
      float:right;
      font-weight: 1000;
      color: var(--primary);
    }

    /* Buttons */
    .actions{
      display:flex;
      gap:12px;
      margin-top: 18px;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .btn{
      border:0;
      border-radius: 14px;
      height:56px;
      padding: 0 18px;
      font-weight: 1000;
      cursor:pointer;
      flex: 1 1 180px;
      min-width: 140px;
    }
    .btn.primary{
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      color:#fff;
      box-shadow: 0 16px 30px rgba(29,73,168,.18);
    }
    .btn.ghost{
      background: #fff;
      border:2px solid #DCE4F3;
      color: var(--primary);
    }

    /* Results */
    .results-head{
      font-size: clamp(26px, 4vw, 38px);
      font-weight: 1000;
      letter-spacing:-.7px;
      margin: 6px 0 12px;
      text-align:center;
    }
    .metrics{
      border-radius: 16px;
      overflow:hidden;
      border:1px solid var(--border);
      background: #F2F6FF;
      display:grid;
      grid-template-columns: 1fr 1fr;
      margin: 12px 0 16px;
    }
    .metric{
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      border-right:1px solid rgba(11,27,42,.06);
    }
    .metric:last-child{border-right:0}
    .metric .big{
      font-size: 34px;
      font-weight: 1000;
      color: var(--primary);
      line-height:1;
    }
    .metric .cap{
      color: var(--muted);
      font-weight: 900;
      font-size: 13px;
    }
    .metric .stack{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:2px;
    }
    .metric svg{width:18px;height:18px; stroke: var(--primary); fill:none; stroke-width:2}

    /* Email box */
    .explain{
      margin-top: 14px;
      padding-top: 6px;
    }
    .explain h3{
      margin: 10px 0 8px;
      font-size: 22px;
      font-weight: 1000;
      letter-spacing:-.3px;
    }
    .explain p{
      margin: 0 0 12px;
      color: var(--ink);
      font-weight: 650;
      line-height:1.45;
      max-width: 68ch;
    }

    .form-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (min-width:720px){
      .form-grid{grid-template-columns: 1fr 1fr;}
      .form-grid .full{grid-column:1 / -1;}
    }
    .in{
      width:100%;
      height:54px;
      padding: 0 14px;
      border-radius: 12px;
      border: 2px solid #DCE4F3;
      font-weight: 800;
      font-size: 15px;
      outline:none;
    }
    .in:focus{border-color: rgba(29,73,168,.55)}
    .small{
      color: var(--muted);
      font-weight: 650;
      font-size: 12px;
      line-height:1.35;
    }
    .check{
      display:flex;
      gap:10px;
      align-items:flex-start;
      margin-top: 8px;
    }
    .check input{
      width:22px;height:22px;
      accent-color: var(--primary);
      margin-top:2px;
    }

    .footer{
      text-align:center;
      color: var(--muted);
      margin-top: 18px;
      font-weight: 650;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="brand-title">OLIVER HEY FITNESS</div>
      </div>
      <button class="pill-btn" type="button">Join nu!</button>
      <button class="menu" type="button" aria-label="Menu"><span></span></button>
    </div>
  </div>

  <div class="wrap">
    <div class="container">
      <div class="hero">
        <h1>Kalorieberegner</h1>
        <p>Baseret pÃ¥ Harris-Benedict (revideret)</p>
      </div>

      <div class="card">

        <!-- STEP 1 -->
        <section class="step active" id="step-1">
          <div class="section-title">Jeg vil gerneâ€¦</div>
          <p class="subline"></p>

          <div class="grid">
            <div class="opt selected" data-goal="maintain" id="goal-maintain">
              <div class="icon" aria-hidden="true">
                <!-- FRUGT (SVG) -->
                <svg viewBox="0 0 24 24">
                  <path d="M15 6c.8-1.2 2.2-2 4-2" />
                  <path d="M12 7c-3.5 0-6 2.7-6 6.6C6 18.2 9.2 21 12 21s6-2.8 6-7.4C18 9.7 15.5 7 12 7Z"/>
                  <path d="M9.5 5.5c.8.7 1.6 1 2.5 1s1.7-.3 2.5-1" />
                </svg>
              </div>
              <div>
                <h3>Hold vÃ¦gten og fÃ¥ mere energi</h3>
                <p>Stabil vÃ¦gt, mere overskud og bedre vaner</p>
              </div>
            </div>

            <div class="opt" data-goal="gain" id="goal-gain">
              <div class="icon" aria-hidden="true">
                <!-- BICEPS (SVG) -->
                <svg viewBox="0 0 24 24">
                  <path d="M8 14c1-2 2-3 4-3 2 0 3 1 3 3v1c0 2-2 4-5 4H7c-2 0-3-1-3-3 0-1 .5-2 1.5-2.5"/>
                  <path d="M15 12c0-2 1-3 2-3 1 0 2 1 2 2 0 1-.5 2-1.5 3"/>
                  <path d="M9 10c0-2 1-3 2-4"/>
                </svg>
              </div>
              <div>
                <h3>Byg muskelmasse og styrke</h3>
                <p>Fokus pÃ¥ muskelopbygning og performance</p>
              </div>
            </div>

            <div class="opt" data-goal="cut" id="goal-cut">
              <div class="icon" aria-hidden="true">
                <!-- VÃ†GT / DUMBBELL (SVG) -->
                <svg viewBox="0 0 24 24">
                  <path d="M3 10v4"/>
                  <path d="M7 9v6"/>
                  <path d="M17 9v6"/>
                  <path d="M21 10v4"/>
                  <path d="M7 12h10"/>
                </svg>
              </div>
              <div>
                <h3>Smid fedt eller vÃ¦gt</h3>
                <p>Lavere fedtprocent â€“ uden at smadre energien</p>
              </div>
            </div>
          </div>

          <div class="actions">
            <span></span>
            <button class="btn primary" id="to-step-2" type="button">NÃ¦ste</button>
          </div>
        </section>

        <!-- STEP 2 -->
        <section class="step" id="step-2">
          <div class="section-title">KÃ¸n</div>
          <div class="seg" style="margin-bottom:10px">
            <button type="button" class="active" id="gender-f">Kvinde</button>
            <button type="button" id="gender-m">Mand</button>
          </div>

          <!-- MÃ¥leenhed (Imperial) fjernet helt -->

          <div class="row">
            <div class="field">
              <div class="label">Alder <span class="value" id="age-val">30</span></div>
              <div class="slider-wrap"><input id="age" type="range" min="14" max="80" value="30"/></div>
            </div>

            <div class="field">
              <div class="label">HÃ¸jde <span class="value" id="height-val">175 cm</span></div>
              <div class="slider-wrap"><input id="height" type="range" min="140" max="210" value="175"/></div>
            </div>

            <div class="field">
              <div class="label">VÃ¦gt <span class="value" id="weight-val">80 kg</span></div>
              <div class="slider-wrap"><input id="weight" type="range" min="40" max="180" value="80"/></div>
            </div>
          </div>

          <div class="actions">
            <button class="btn ghost" id="back-1" type="button">Tilbage</button>
            <button class="btn primary" id="to-step-3" type="button">NÃ¦ste</button>
          </div>
        </section>

        <!-- STEP 3 -->
        <section class="step" id="step-3">
          <div class="section-title">Mit aktivitetsniveau erâ€¦</div>
          <p class="subline">VÃ¦lg den mulighed der passer bedst pÃ¥ din hverdag.</p>

          <div class="grid">
            <div class="opt selected" data-activity="1.2">
              <div class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M4 14c2-5 6-8 8-8s6 3 8 8"/><path d="M6 14h12"/><path d="M9 14v6m6-6v6"/></svg>
              </div>
              <div>
                <h3>Let aktiv</h3>
                <p>Let motion 1â€“3 dage/uge</p>
              </div>
            </div>

            <div class="opt" data-activity="1.45">
              <div class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M4 12h4l2-4 4 8 2-4h4"/><path d="M6 20h12"/></svg>
              </div>
              <div>
                <h3>Moderat aktiv</h3>
                <p>TrÃ¦ning 3â€“5 dage/uge</p>
              </div>
            </div>

            <div class="opt" data-activity="1.65">
              <div class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M7 17l5-10 5 10"/><path d="M5 17h14"/></svg>
              </div>
              <div>
                <h3>Meget aktiv</h3>
                <p>HÃ¥rd trÃ¦ning 6â€“7 dage/uge</p>
              </div>
            </div>

            <div class="opt" data-activity="1.85">
              <div class="icon" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M5 12h14"/><path d="M7 7h10"/><path d="M7 17h10"/><path d="M12 6v12"/></svg>
              </div>
              <div>
                <h3>Ekstra aktiv</h3>
                <p>Fysisk job og/eller 2x trÃ¦ning</p>
              </div>
            </div>
          </div>

          <div class="actions">
            <button class="btn ghost" id="back-2" type="button">Tilbage</button>
            <button class="btn primary" id="calc" type="button">Beregn</button>
          </div>
        </section>

        <!-- STEP 4 (RESULTS + EMAIL) -->
        <section class="step" id="step-4">
          <div class="results-head">Din protein & kalorier</div>

          <div class="metrics">
            <div class="metric">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2c2 3 6 6 6 10a6 6 0 1 1-12 0c0-4 4-7 6-10Z"/></svg>
              <div class="stack">
                <div class="cap">Kalorier pr. dag</div>
                <div class="big" id="kcal-out">â€”</div>
              </div>
            </div>
            <div class="metric">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 14c2-5 6-8 8-8s6 3 8 8"/><path d="M6 14h12"/></svg>
              <div class="stack">
                <div class="cap">Protein pr. dag</div>
                <div class="big" id="prot-out">â€”</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="field">
              <div class="label">Protein pr. kg <span class="value" id="ppk-val">1.8 g</span></div>
              <div class="slider-wrap">
                <input id="ppk" type="range" min="1.2" max="2.4" step="0.1" value="1.8"/>
              </div>
            </div>

            <div class="field">
              <div class="label">Kalorieunderskud <span class="value" id="def-val">15%</span></div>
              <div class="slider-wrap">
                <input id="def" type="range" min="0" max="25" step="1" value="15"/>
              </div>
            </div>
          </div>

          <div class="explain">
            <h3>Jeg sender dig din personlige anbefaling</h3>
            <p>
              Jeg sender dig din personlige anbefaling og forklarer, hvorfor tallet ofte er anderledes end det, du ser i MyFitnessPal â€“ og hvorfor jeg ikke fortÃ¦ller dig prÃ¦cist, hvor meget fedt og kulhydrat du skal spise.
            </p>

            <!-- NY TEKST (rettelse) -->
            <p>
              Skriv din bedste email herunder, sÃ¥ sender jeg min forklaring og holder dig opdateret ved at tilmelde dig min mail-liste, hvor du fÃ¥r alt den viden der skal til for at smide fedt, bygge muskelmasse og generelt komme i form ðŸ˜Š
            </p>

            <!-- MAILCHIMP FORM -->
            <form
              action="https://me.us15.list-manage.com/subscribe/post?u=a8c95bb1bd295a68546d88267&amp;id=1267d637b6&amp;f_id=008bc2e1f0"
              method="post"
              target="_blank"
              novalidate
              id="mc-form"
            >
              <div class="form-grid">
                <input class="in" type="text" name="FNAME" id="mce-FNAME" placeholder="Fornavn" autocomplete="given-name" />
                <input class="in" type="text" name="LNAME" id="mce-LNAME" placeholder="Efternavn" autocomplete="family-name" />
                <input class="in full" type="email" name="EMAIL" id="mce-EMAIL" placeholder="Email" required autocomplete="email" />

                <!-- Consent checkbox -->
                <div class="check full">
                  <input type="checkbox" id="consent" required />
                  <div class="small">
                    Jeg accepterer at modtage emails med min anbefaling og tips. Du kan altid afmelde med Ã©t klik.
                  </div>
                </div>

                <!-- Hidden fields -->
                <input type="hidden" name="tags" value="Kalorieberegner 2026" />
                <input type="hidden" name="KALORIER" id="mce-KALORIER" value="" />

                <!-- bot field -->
                <div aria-hidden="true" style="position:absolute;left:-5000px;">
                  <input type="text" name="b_a8c95bb1bd295a68546d88267_1267d637b6" tabindex="-1" value="">
                </div>

                <button class="btn primary full" type="submit" id="send-btn">Send</button>
              </div>
            </form>
          </div>

          <div class="actions" style="margin-top:14px">
            <button class="btn ghost" id="back-3" type="button">Tilbage</button>
            <button class="btn ghost" id="restart" type="button">Start forfra</button>
          </div>

          <div class="footer">Â© Oliver Hey Fitness</div>
        </section>

      </div>
    </div>
  </div>

  <script>
    // ---------- State ----------
    const state = {
      goal: "maintain",     // maintain | gain | cut
      gender: "f",          // f | m
      age: 30,
      heightCm: 175,
      weightKg: 80,
      activity: 1.2,
      proteinPerKg: 1.8,
      deficitPct: 15,
    };

    // ---------- Helpers ----------
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    function showStep(n){
      $$(".step").forEach(s => s.classList.remove("active"));
      $("#step-" + n).classList.add("active");
      window.scrollTo({top:0, behavior:"smooth"});
    }

    // ---------- Step 1 (Goal) ----------
    $$(".opt[data-goal]").forEach(opt => {
      opt.addEventListener("click", () => {
        $$(".opt[data-goal]").forEach(o => o.classList.remove("selected"));
        opt.classList.add("selected");
        state.goal = opt.getAttribute("data-goal");
      });
    });

    $("#to-step-2").addEventListener("click", () => showStep(2));

    // ---------- Step 2 (Gender / Sliders) ----------
    function updateStep2Labels(){
      $("#age-val").textContent = state.age;

      // KUN METRIC (imperial fjernet)
      $("#height").min = 140; $("#height").max = 210; $("#height").step = 1;
      $("#weight").min = 40;  $("#weight").max = 180; $("#weight").step = 1;

      $("#height").value = state.heightCm;
      $("#weight").value = state.weightKg;

      $("#height-val").textContent = `${state.heightCm} cm`;
      $("#weight-val").textContent = `${state.weightKg} kg`;
    }

    function applyGenderButtons(){
      $("#gender-f").classList.toggle("active", state.gender === "f");
      $("#gender-m").classList.toggle("active", state.gender === "m");
    }

    $("#gender-f").addEventListener("click", () => { state.gender="f"; applyGenderButtons(); });
    $("#gender-m").addEventListener("click", () => { state.gender="m"; applyGenderButtons(); });

    $("#age").addEventListener("input", (e) => {
      state.age = Number(e.target.value);
      $("#age-val").textContent = state.age;
    });

    $("#height").addEventListener("input", (e) => {
      const v = Number(e.target.value);
      state.heightCm = v;
      $("#height-val").textContent = `${state.heightCm} cm`;
    });

    $("#weight").addEventListener("input", (e) => {
      const v = Number(e.target.value);
      state.weightKg = v;
      $("#weight-val").textContent = `${state.weightKg} kg`;
    });

    $("#back-1").addEventListener("click", () => showStep(1));
    $("#to-step-3").addEventListener("click", () => showStep(3));

    // ---------- Step 3 (Activity) ----------
    $$("#step-3 .opt[data-activity]").forEach(opt => {
      opt.addEventListener("click", () => {
        $$("#step-3 .opt[data-activity]").forEach(o => o.classList.remove("selected"));
        opt.classList.add("selected");
        state.activity = Number(opt.getAttribute("data-activity"));
      });
    });

    $("#back-2").addEventListener("click", () => showStep(2));

    // ---------- Calculations ----------
    function bmr(){
      // Mifflin-St Jeor
      const w = state.weightKg;
      const h = state.heightCm;
      const a = state.age;
      if(state.gender === "m"){
        return (10*w) + (6.25*h) - (5*a) + 5;
      }
      return (10*w) + (6.25*h) - (5*a) - 161;
    }

    function goalMultiplier(){
      // keep simple but effective
      if(state.goal === "gain") return 1.08;     // small surplus
      if(state.goal === "cut")  return 1.00;     // base before deficit slider
      return 1.00;                               // maintain
    }

    function maintenanceCalories(){
      return bmr() * state.activity;
    }

    function targetCalories(){
      let kcal = maintenanceCalories() * goalMultiplier();

      // deficit slider only really relevant for cut; for maintain/gain keep it mild
      if(state.goal === "cut"){
        kcal = kcal * (1 - (state.deficitPct/100));
      } else if(state.goal === "maintain"){
        // small nudge allowed
        kcal = kcal * (1 - Math.min(state.deficitPct, 10)/200); // max 5% down
      } else {
        // gain: ignore deficit, keep a touch higher
        kcal = kcal * (1 + 0.00);
      }
      return Math.round(kcal);
    }

    function targetProtein(){
      return Math.round(state.weightKg * state.proteinPerKg);
    }

    function updateResults(){
      const kcal = targetCalories();
      const protein = targetProtein();

      $("#kcal-out").textContent = kcal;
      $("#prot-out").textContent = protein + "g";

      // push calories to hidden Mailchimp field
      $("#mce-KALORIER").value = String(kcal);
    }

    // results sliders
    $("#ppk").addEventListener("input", (e) => {
      state.proteinPerKg = Number(e.target.value);
      $("#ppk-val").textContent = `${state.proteinPerKg.toFixed(1)} g`;
      updateResults();
    });

    $("#def").addEventListener("input", (e) => {
      state.deficitPct = Number(e.target.value);
      $("#def-val").textContent = `${state.deficitPct}%`;
      updateResults();
    });

    // calculate -> step 4
    $("#calc").addEventListener("click", () => {
      // set defaults depending on goal (James-feel)
      if(state.goal === "gain"){
        state.proteinPerKg = 2.0;
        state.deficitPct = 0;
      } else if(state.goal === "cut"){
        state.proteinPerKg = 2.0;
        state.deficitPct = 15;
      } else {
        state.proteinPerKg = 1.8;
        state.deficitPct = 5;
      }
      $("#ppk").value = state.proteinPerKg;
      $("#def").value = state.deficitPct;
      $("#ppk-val").textContent = `${state.proteinPerKg.toFixed(1)} g`;
      $("#def-val").textContent = `${state.deficitPct}%`;

      updateResults();
      showStep(4);
    });

    $("#back-3").addEventListener("click", () => showStep(3));
    $("#restart").addEventListener("click", () => showStep(1));

    // ---------- Mailchimp form: require consent + ensure kcal field is updated ----------
    $("#mc-form").addEventListener("submit", (e) => {
      // ensure calories up to date
      updateResults();

      if(!$("#consent").checked){
        e.preventDefault();
        alert("SÃ¦t venligst flueben for at fortsÃ¦tte ðŸ™‚");
        return;
      }
    });

    // ---------- Init ----------
    applyGenderButtons();
    updateStep2Labels();
    updateResults();
  </script>
</body>
</html>
